<mat-card>
    <mat-card-content fxLayout="column" fxLayoutGap="24px">
        <form [formGroup]="form" fxLayout="column" fxLayoutGap="24px">
            <mat-form-field [attr.readonly]="!!template" class="full-width" floatLabel="always">
                <input required matInput placeholder="Name" formControlName="id" />
            </mat-form-field>
            <mat-form-field class="full-width" floatLabel="always">
                <textarea required matInput placeholder="Templates rules" formControlName="template"></textarea>
            </mat-form-field>
        </form>
        <div fxLayout fxLayoutAlign="end" fxLayoutGap="16px">
            <button mat-button color="accent" [disabled]="inProgress$ | async" (click)="validateTemplate()">
                Validate
            </button>
            <button
                mat-button
                color="primary"
                [disabled]="form.invalid || (inProgress$ | async)"
                (click)="saveTemplate()"
            >
                {{ template ? 'Save' : 'Create' }}
            </button>
        </div>
    </mat-card-content>
    <mat-card-footer *ngIf="inProgress$ | async">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </mat-card-footer>
</mat-card>
